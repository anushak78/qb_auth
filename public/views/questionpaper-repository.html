<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>QB Authoring Tool</title>

  <!-- Bootstrap -->
  <!-- <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/css/style.css" rel="stylesheet"> -->

  <!--     <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
  <!-- <script src="../../../../../bower_components/angular/angular.min.js"></script>    -->
  <script src="/js/bootstrap-paginator.js"></script>

</head>

<body>
  <!-- cooling page code start here -->
  <div class="wrapper">
    <!-- header section -->
    <header id="header">
      <div class="container clearfix">
        <div class="clearfix">
          <!-- Logo -->
          <div class="logo">
            <a class=""><img src="/assets/images/logo.jpg" alt="Canvas Logo"></a>
          </div>
          <!-- #logo end -->
          <div class="col-sm-2 userDetails">
            <div class="dropdown">
              <button class="btn login-info dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">
                <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                {{username}}
                <span class="caret"></span></button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                <li><a ui-sref="changePassword">Change Password</a></li>
                <!-- <li><a href="#">Another action</a></li> -->
                <li role="separator" class="divider"></li>
                <li><a ng-controller="logOutController" ng-click="logout()">Log Out</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="nav">
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">

              <li><a ng-if="role == 'SUADM'" ui-sref="SuperAdminDashboard">Dashboard</a></li>
              <li><a ng-if="role == 'ADM'" ui-sref="adminDashboard" ng-hide="role == 'QBADM'">Dashboard</a></li>
              <li><a ui-sref="qp_repository" class="active">Question Bank</a></li>
              <li><a ng-hide="role == 'QBADM'" ui-sref="publishedExams">Published Exam</a></li>
              <li class="dropdown"> <a style="cursor: pointer;" class="dropdown-toggle" data-toggle="dropdown"
                  role="button" aria-expanded="false" ng-hide="role == 'QBADM'">Exam Management <span
                    class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a ng-hide="role == 'QBADM'" ui-sref="culling">Culling</a></li>
                </ul>
              </li>
              <li class="dropdown" ng-hide="role == 'QBADM'">
                <a style="cursor: pointer;" class="dropdown-toggle" data-toggle="dropdown" role="button"
                  aria-expanded="false">Masters <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a ui-sref="courseMaster">Course Master</a></li>
                  <li><a ui-sref="subjectMaster">Subject Master</a></li>
                  <li><a ui-sref="moduleMaster">Module Master</a></li>
                  <li><a ui-sref="topicMaster">Unit Master</a></li>
                  <li><a ui-sref="examMaster">Exam Master</a></li>
                  <li><a ui-sref="userMaster">User Master</a></li>

                </ul>
              </li>
              <!-- <li><a href="#">Exam Paper</a></li>
                            <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Reports <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">Separated link</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">One more separated link</a></li>
                                </ul>
                              </li> -->
            </ul>

          </div>
        </div>
        <!--   <div style=" float: right;">
                    <button class="btn btn-success">+ Create Exam Paper</button>
                  </div> -->
    </header>
    <!-- header section -->

    <!-- Main Body section -->
    <div class="container ">


      <!-- Modal -->
      <div class="modal fade" id="myModal" role="dialog">

        <div class="modal-dialog modal-lg">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Search</h4>
            </div>

            <div class="modal-body">
              <!--  <script type="text/javascript">
      



    jQuery(document).ready(function() {
        var id = 0;
      jQuery("#addrow").click(function() {
        id++;           
        var row = jQuery('.samplerow tr').clone(true);
        row.find("input:text").val("");
        row.attr('id',id); 
        row.appendTo('#dynamicTable1');        
        return false;
    });        
        
  $('.remove').on("click", function() {
  $(this).parents("tr").remove();
});
}); 

</script>  -->


              <table id="dynamicTable1" width="100%" cellpadding="3" cellspacing="3">
                <tr id="0" ng-repeat="criteria in searchCriteria">
                  <td width="25%">
                    <!-- <select class="form-control" id="sel2"> -->
                    <span style="color: red; 
      position: absolute;
      margin-left: -12px;">*</span>
                    <select class="form-control" id="condition" ng-model="criteria.condition" ng-change=>
                      <!-- ng-change="showHiddenOption()" -->
                      <option value="">Select</option>
                      <option value="Course">Course</option>
                      <option value="Subject">Subject</option>
                      <option value="Module">Module</option>
                      <option value="Topic">Unit</option>
                      <option value="Marks">Marks</option>
                      <option value="Question Id">Question Id</option>
                      <option value="Question Type">Question Type</option>
                      <option value="Question Body">Question Body</option>
                      <option value="Reference">Reference</option>
                      <option value="Status">Status</option>

                    </select></td>
                  <td width="25%">
                    <!-- <select class="form-control" id="sel2"> -->
                    <span style="color: red; 
        position: absolute;
        margin-left: -12px;">*</span>
                    <select class="form-control" id="Prefix" ng-model="criteria.valuePrefix"
                      ng-show="criteria.condition != 'Marks' && criteria.condition != 'Question Id' ">
                      <option value=""> Select</option>
                      <option value="1">Contains</option>
                      <option value="2">Does Not Contains</option>
                      <option value="3">Starts With</option>
                      <option value="4">Ends With</option>
                      <option value="5">Equal To</option>
                    </select>
                    <!-- <span ng-show="criteria.condition == 'Marks' || criteria.condition == 'Question Id'" style="color: red">*</span> -->
                    <select class="form-control" id="Prefix1" ng-model="criteria.valuePrefix"
                      ng-show="criteria.condition == 'Marks' || criteria.condition == 'Question Id'">
                      <option value=""> Select</option>
                      <option value="5">Equal To</option>
                      <option value="6">Not Equal To</option>
                      <option value="8">Greater Than Equal To</option>
                      <option value="10">Less Than Equal To</option>
                      <!--  <option value="10" hidden="true">Less Than Equal to </option> -->
                      <!--   <option value="11">Betweeen</option> -->
                    </select>
                  </td>
                  <td width="40%">
                    <!-- <input type="text" id="fld3" class="form-control" /> -->
                    <div class="row">
                      <span style="color: red;
    position: absolute;
    margin-top: -14px;
    margin-left: 12px;">*</span>
                      <input style="width: 90%;margin-left: 7%;margin-top: -16px;" type="text" id="fld3"
                        class="form-control" ng-model="criteria.value" />
                    </div>

                    <!--  <select class="form-control" id="fld31"  ng-model="criteria.value" ng-show="criteria.condition == 'Subject'">     
        <option value="">Select</option>
        <option value="1">Principle and Practices of Banking</option>
        <option value="2">Advanced Bank Management</option>
      </select> -->
                  </td>

                  <td width="10%" valign="top">
                    <!-- <a href="#" class="btn btn-default btnGreen " id="addrow"> -->
                    <!-- <a href="#" ng-show="criteria.addRemove == 'add'" ng-click="addRow(criteria.id)" class="btn btn-primary btn-add">
  +</a> -->

                    <button ng-show="criteria.addRemove == 'add'" ng-click="addRow(criteria.id)"
                      class="btn btn-primary btn-add">
                      +</button>

                    <button ng-show="criteria.addRemove == 'remove'" ng-click="removeRow(criteria.id)"
                      class="btn btn-primary btn-danger">-</button>
                  </td>
                </tr>
              </table>





              <!--     
  <div class="row">
            <div class="col-md-3"><select class="form-control" id="sel2">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select></div>
            <div class="col-md-3"><select class="form-control" id="sel2">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select></div>
            <div class="col-md-5"><input type="text" id="p_scnt" size="20" name="p_scnt" class="form-control" value="" placeholder="Input Value" /></div>
            <div class="col-md-1">
<a href="#" class="btn btn-default btnGreen" id="addScnt">+</a>
            </div>
          </div> -->

            </div>
            <div class="modal-footer text-left">
              <button type="button" class="btn btn-default btnGreen" id="searchbtn"
                ng-click="submitCriteria()">Search</button>
              <button type="button" class="btn btn-default" ng-click="resetValue()">Reset</button>
            </div>
          </div>

        </div>
      </div>





      <div class="modal fade" id="uploadQbModal" role="dialog">

        <div class="modal-dialog modal-lg">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" id="close-modal" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Upload Question Bank</h4>
            </div>
            <div class="modal-body">


              <form class="ng-pristine ng-valid">
                <div class="input-group">
                  <input type="file" class="btn btn-default form-control m-b" name="file" id="file">
                  <span class="input-group-btn">
                    <input type="submit" value="Submit" class="btn btn-success m-b" ng-click="preImportFile()">
                  </span>
                </div>



              </form>

            </div>

          </div>

        </div>
      </div>
      <script src="/scripts/constantMap.js"></script>
      <script type="text/javascript">


        function getOperator(operatorString) {
          var operator = "";

          if (operatorString == "5")
            operator = "=";
          else if (operatorString == "6")
            operator = "!=";
          else if (operatorString == "7")
            operator = ">";
          else if (operatorString == "8")
            operator = ">=";
          else if (operatorString == "9")
            operator = "<";
          else if (operatorString == "10")
            operator = "<=";
          else if (operatorString == "1" || operatorString == "3" || operatorString == "4")
            operator = "like";
          else if (operatorString == "2")
            operator = " not like";

          return operator;

        }

        function getOperation(operationString, value) {
          var operation = "";
          // alert(value.toLowerCase());

          if (operationString == "1" || operationString == "2") {
            operation = "'%" + value.toLowerCase() + "%'"
          }
          else if (operationString == "3") {
            operation = "'" + value.toLowerCase() + "%'"
          }
          else if (operationString == "4") {
            operation = "'%" + value.toLowerCase() + "'"
          }
          else {
            operation = "'" + value.toLowerCase() + "'"
          }

          return operation;
        }



      </script>
      <div class="">
        <!-- Added by shilpa-->
        <div id="addChildQuesModel" class="modal" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" id="ChildModel" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add Child Question</h4>
              </div>
              <div class="modal-body">

                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 rightPan">
                    <div class="row">
                      <div class="col-md-3">
                        <b>Course name</b>
                        {{casePassage[0].qba_course_master.qba_course_name}}
                      </div>

                      <div class="col-md-3">
                        <b>Subject</b>
                        {{casePassage[0].qba_subject_master.subject_name}}
                      </div>
                    </div><br>
                    <div class="row">
                      <div class="col-md-3">
                        <b>Module</b>
                        {{casePassage[0].qba_module_mstr.module_name}}
                      </div>

                      <div class="col-md-3">
                        <b>Unit</b>
                        {{casePassage[0].qba_topic_master.qba_topic_code}}-{{casePassage[0].qba_topic_master.topic_name}}
                      </div>
                      <div class="col-md-1"> <b>Marks</b><input ng-model="marks" type="number" class="form-control"
                          name="" min="0" step="0.5" onkeyup="limit(this,3);" style="width:120%;">
                      </div>
                      <div class="col-md-2"> <b>Negative Marks</b><input ng-model="negativeMarks" type="number"
                          class="form-control smalltb" name="" min="0" step="0.5">
                      </div>
                    </div><br>

                    <div class="row">
                      <div class="col-md-12">
                        <b>Passage</b>
                        <p ng-bind-html="renderAsHtml(casePassage[0].qst_body)"></p>
                      </div>
                    </div><br><br>

                    <div class="row">
                      <div class="col-md-12">
                        <b>Question<span style="color: red">*</span></b>
                        <textarea class="form-control" id="editor1" name="editor"></textarea>
                      </div>
                    </div><br><br>

                    <div class="row">
                      <div class="col-md-3">
                        <b>Number of options:<span style="color: red">*</span></b>
                        <select id="selectOptions" ng-model="numOfOptions" class="form-control smalltb"
                          ng-change="addOrRemoveOptions()" ng-options="option.value for option in numOfOptionsList">
                        </select>
                      </div>
                    </div>

                    <div id="top"></div>
                    <div class="row">
                      <div class="col-md-10">&nbsp;</div>
                      <div class="col-md-2 text-right textCorrectAns">Correct Answer</div>
                    </div>

                    <div class="row" ng-repeat="alternative in newChildQuestion.alternatives">
                      <div class="col-md-11 options">
                        <div style="border: 1px solid #ccc;
                              border-radius: 4px">

                          <textarea id="editor{{$index+2}}" class="form-control" name="editor{{$index+2}}">
                         </textarea>

                        </div>
                        <!--   <style>
                       div[contenteditable] {
                          outline: 1px solid black;
                       } 
                       </style> -->
                      </div>
                      <div class="col-md-1 text-center">
                        <input type="radio" ng-model="$parent.selectedOption" name="correctAnswer"
                          ng-value="{{$index}}">
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12"><br>
                        <b>Remark</b>
                        <textarea id="editorRemarks" name="editorRemarks" class="form-control txtHeight"></textarea>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <b>Reference</b>
                        <textarea id="editorReference" name="editorReference" class="form-control txtHeight"></textarea>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12"><br>
                        <b>Calculations</b>
                        <textarea id="editorCalculations" name="editorCalculations"
                          class="form-control txtHeight"></textarea>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-10">
                        <button ng-click="saveCSQChild()" class="btn btnGreen">Save</button> &nbsp; <button
                          data-dismiss="modal" id="closechildmodal" class="btn btn-default">Cancel</button>
                      </div>
                    </div>

                  </div>

                </div>

              </div>
            </div>
          </div>
        </div>
        <!-- End by shilpa-->


        <div class="row addUpadateRow ">
          <div class="col-md-6">
            <h4>Question Bank Repository</h4>
          </div>
          <div class="col-md-6 text-right">


            <button id="back" ng-click="clearData()" ng-if="role == 'QBADM' " ui-sref="QBAdminDashboard"
              class="btnBordered">Back</button>
            <button id="back" ng-click="clearData()" ui-sref="SuperAdminDashboard" class="btnBordered"
              ng-if="role == 'SUADM' ">Back</button>


            <button ui-sref="addmcq" ng-click="setExamDetails()" class="btnBordered">Add MCQ</button>
            <button ui-sref="addcsq_parent" ng-click="prepareCSQDetails()" class="btnBordered">Add CSQ</button>
            <button class="btnBordered" data-toggle="modal" data-target="#uploadQbModal">Upload QB</button>
            <button class="btnBordered" ng-click="export()">Export</button>
            <button class="btnBlue " data-toggle="modal" data-target="#myModal">Search</button>
            <button class="btnBlue" ng-click="saveQuestBank()" ng-if="repoQuestions.length">Save</button>
          </div>

        </div>

        <!--  <form>
                    <input type="file" class="btn btn-default form-control m-b" name="file" id="file">
                   <input type="submit" value="Submit" class="btn btn-success m-b" ng-click="importFile()"/>
                 </form> -->

        <div class="row">
          <div class="col-md-3">
            <div class="form-group">
              <label>Course</label>
              <select id="qpCourseList"
                ng-options="course.qba_course_pk as course.qba_course_code + ' - ' + course.qba_course_name for course in courseList"
                ng-model="selectedCourse.qba_course_pk" ng-change="getSubjectList('N')"
                class="form-control selectpicker">
                <option value="">Select Course</option>
              </select>
            </div>
          </div>

          <div class="col-md-3">
            <label>Subject</label>
            <select id="qpSubjectList" ng-model="selectedSubject.qba_subject_pk" class="form-control selectpicker"
              ng-options="subject.qba_subject_pk as subject.qba_subject_code + ' - ' + subject.subject_name for subject in subjectList"
              ng-change="getModuleList()">
              <option value="">Select Subject</option>
            </select>
          </div>

          <div class="col-md-3">
            <label>Module</label>
            <select id="qpModuleList" ng-model="selectedModule" class="form-control selectpicker"
              ng-options="module.module_name for module in moduleList" ng-change="getTopicList()">
            </select>
          </div>

          <div class="col-md-3">
            <label>Language</label>
            <select id="qpLanguageList" ng-model="selectedLanguage" class="form-control selectpicker"
              ng-options="language.lang_name for language in languageList" ng-change="getTopicList()">
            </select>
          </div>

        </div>

        <div class="row containerPadding">
          <div class="col-md-12 searchbar">
            <div class="row">
              <div class="col-md-3">
                <span class="records"> Total Records : <b>{{countTopicListQuestions()}}</b></span>
              </div>

              <div class="col-md-9">
                <div class="col-md-7">
                  Show <select ng-model="selectNoQstn" class="form-control mBottom0"
                    style="width: 70px; height: 30px; display: inline-block;" ng-change="reloadPage()"
                    ng-options="page.no_Qstn for page in NoQstnList">
                  </select> Questions per page
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="containerPadding">
          <div class="row row-eq-height">
            <div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 leftpan">
              <ul>

                <li ng-repeat="module in moduleNameList.modules ">
                  Module {{ module }} ({{moduleNameList.module_count[$index]}})
                  <!--Changed by Chintan -->
                  <ul class="left-nav">

                    <li ng-if="module == topic.module_name" ng-repeat="topic in topicList"><a
                        ng-click="populateQuestions(topic)">
                        {{topic.qba_topic_code}} - {{topic.topic_name}} ({{topic.qcount}})
                        <br />
                        <label ng-if="topic.mcq_count != null">
                          Non-Case({{topic.mcq_count}})</label>
                        <label ng-if="topic.mcq_count == null">
                          Non-Case(0)</label>
                        <br />
                        <label ng-if="topic.cs_count != null">
                          Case({{topic.cs_count}})</label>
                        <label ng-if="topic.cs_count == null">
                          Case(0)</label>
                      </a></li>
                    <!--Changed by Chintan -->

                  </ul>

                </li>
              </ul>

            </div>
            <div class="col-xs-8 col-sm-8 col-md-9 col-lg-9 rightPan noPadding">



              <div class="col-md-12" ng-show="repoQuestions.length > 0">
                <div class="row paginationContainer">
                  <div class="col-md-6">
                    <ul class="pagination">
                      <li>
                        Showing {{(countQst)>0?showOffset + 1:0}} to
                        {{(showOffset + showQstn)>countQst?countQst:(showOffset + showQstn) | number}} of {{countQst}}
                        entries
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <div class="pull-right">
                      <nav aria-label="Page navigation ">
                        <div id="pagination1">
                        </div>
                      </nav>
                    </div>
                  </div>
                </div>
                <br>
              </div>
              <!-- Ng Repeat repoQuestions -->
              <div ng-repeat="repoQues in repoQuestions" class="qSummery" repeat-end="onEnd()">

                <div ng-if="(repoQues.qst_type == 'CS' && repoQues.qst_pid == '0')" class="qDetails">
                  <button class="btnSmall">QB ID {{repoQues.qb_id}}</button>
                  <button ng-if="repoQues.qst_type == 'M'" class="btnSmall">Multiple Choice</button>
                  <button ng-if="repoQues.qst_type == 'CS'" class="btnSmall">Case</button>
                  <button class="btnSmall">{{repoQues.qba_topic_master.qba_topic_code}} -
                    {{repoQues.qba_topic_master.topic_name}}
                  </button>
                  <button class="btnSmall">Mod {{repoQues.qba_module_mstr.module_name}}</button>
                  <button class="btnSmall">No. of Child questions {{repoQues.no_of_question}}</button>
                  <button class="btnSmall">Total Marks {{repoQues.total_marks}}</button>
                  <div class="col-sm-2 itemButtons" style="float: right;">
                    <button ng-if="repoQues.qst_lang=='ENGLISH'" ng-click="editCaseForAdmin(repoQues);" type="button"
                      class="btn btn-default" aria-label="Left Align"> <a id="pageurl"
                        class="glyphicon glyphicon-pencil" aria-hidden="true"> </a>
                    </button>
                    <div class="dropdown" style="display: inline-block;">
                      <button class="btn btn-default dropdown-toggle btn3" type="button" id="dropdownMenu1"
                        data-toggle="  dropdown" aria-haspopup="true" aria-expanded="true">
                        <span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span>
                      </button>
                      <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                        <li><a data-toggle="modal" data-target="#historyModal"
                            ng-click=historyTabClicked(repoQues.qb_pk)>History</a></li>
                        <li>
                          <a ng-if="repoQues.qst_lang=='ENGLISH'" style="cursor:pointer;" data-toggle="modal"
                            ng-if="repoQues.qst_type == 'CS'" data-target="#addChildQuesModel"
                            ng-click="requestForAddChildQuestion(repoQues,'P')">Add Child Question</a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <!-- <p ng-show="repoQues.qst_pid==0">{{repoQues.qst_body}}</p> -->
                <p ng-if="repoQues.qst_type == 'CS' && repoQues.qst_pid == '0' && repoQues.qst_lang == 'ENGLISH'"
                  ng-bind-html="renderAsHtml(repoQues.qst_body)" class="editable" contenteditable="true"
                  id={{repoQues.qb_id}} ng-blur="getCKInstances(repoQues.qb_id)" ng-model="repoQues.qst_body">
                  {{repoQues.qst_body}}</p>
                <p ng-if="repoQues.qst_type == 'CS' && repoQues.qst_pid == '0' && repoQues.qst_lang != 'ENGLISH'"
                  ng-bind-html="renderAsHtml(repoQues.qst_body)" class="editable" contenteditable="false"
                  id={{repoQues.qb_id}} ng-blur="getCKInstances(repoQues.qb_id)" ng-model="repoQues.qst_body">
                  {{repoQues.qst_body}}</p>
                <!--	  <img ng-if="repoQues.qbank_image.qbi_image_name != null && repoQues.qst_type == 'CS' && repoQues.qst_pid == '0'" src="static/controllers/output/{{repoQues.qbank_image.qbi_image_name}}" >-->

                <!-- <div ng-hide="repoQues.qst_pid=0" class="qDetails"> 
 "-->
                <div ng-if="(repoQues.qst_type == 'CS' && repoQues.qst_pid != '0') || repoQues.qst_type == 'M'"
                  class="qDetails">
                  <div class="row">
                    <div class="col-sm-10">
                      <button class="btnSmall">QB ID {{repoQues.qb_id}}</button>
                      <button ng-if="repoQues.qst_type == 'M'" class="btnSmall">Multiple Choice</button>
                      <!--<button ng-if="repoQues.qst_type == 'CS'" class="btnSmall">Case Question {{repoQues.index_of_question}}</button>-->
                      <button ng-if="repoQues.qst_type == 'CS'" class="btnSmall">Case Question</button>

                      <button class="btnSmall">{{repoQues.qba_topic_master.qba_topic_code}} -
                        {{repoQues.qba_topic_master.topic_name}}</button>
                      <button class="btnSmall">Mod {{repoQues.qba_module_mstr.module_name}}</button>
                      <button class="btnSmall">Marks {{repoQues.qst_marks | number:1}}</button>
                      <button class="btnSmall" ng-if="repoQues.qst_type == 'CS'">Parent Case ID
                        {{repoQues.qst_pid}}</button>
                      <!--<button class="btnSmall" ng-click="editQuestionForAdmin(repoQues);">Edit</button>-->
                      <br><br>
                    </div>

                    <!-- for history option -->
                    <div class="col-sm-2 itemButtons" style="float: right;">

                      <button ng-if="repoQues.qst_lang=='ENGLISH'" ng-click="editQuestionForAdmin(repoQues);"
                        type="button" class="btn btn-default" aria-label="Left Align">
                        <a id="pageurl" class="glyphicon glyphicon-pencil" aria-hidden="true" href=""> </a>
                      </button>
                      <div class="dropdown" style="display: inline-block;">
                        <button class="btn btn-default dropdown-toggle btn3" type="button" id="dropdownMenu1"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                          <span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                          <li><a ng-click=historyTabClicked(repoQues.qb_pk) data-toggle="modal"
                              data-target="#historyModal">History</a></li>
                          <!-- <li><a  ng-click="editQuestionForAdmin(repoQues);">Edit</a></li> -->
                        </ul>
                      </div>
                    </div>
                  </div>



                  <p contenteditable="true" ng-if="repoQues.qst_body != '' && repoQues.qst_lang == 'ENGLISH'"
                    ng-bind-html="renderAsHtml(repoQues.qst_body)" class="editable" id="{{repoQues.qb_id}}"
                    ng-blur="getCKInstances(repoQues.qb_id)" ng-model="repoQues.qst_body"></p>
                  <p contenteditable="false" ng-if="repoQues.qst_body != '' && repoQues.qst_lang != 'ENGLISH'"
                    ng-bind-html="renderAsHtml(repoQues.qst_body)" class="editable" id="{{repoQues.qb_id}}"
                    ng-blur="getCKInstances(repoQues.qb_id)" ng-model="repoQues.qst_body"></p>
                  <!-- <img ng-if="repoQues.qbank_image.qbi_image_name != null" src="static/controllers/output/{{repoQues.qbank_image.qbi_image_name}}" > -->
                  <ul class="options">
                    <li ng-repeat="alternative in repoQues.qstn_alternatives">
                      <div class="radiobtn">
                        <input ng-if="repoQues.qst_lang == 'ENGLISH'" type="radio" name=""
                          ng-checked="alternative.qta_is_corr_alt=='Y'"
                          ng-click="changeSelectedOption($event,$index,repoQues.qstn_alternatives, $parent.$parent.$index,repoQues.qb_id,repoQues.qb_pk)">
                        <input ng-if="repoQues.qst_lang != 'ENGLISH'" type="radio" name=""
                          ng-checked="alternative.qta_is_corr_alt=='Y'"
                          ng-click="changeSelectedOption($event,$index,repoQues.qstn_alternatives, $parent.$parent.$index,repoQues.qb_id,repoQues.qb_pk)"
                          ng-disabled="true"></div>
                      <div class="answer">
                        <!-- ng-bind-html="renderAsHtml(alternative.qta_alt_desc)" -->



                        <div ng-if="repoQues.qst_lang == 'ENGLISH'"
                          ng-bind-html="renderAsHtml(alternative.qta_alt_desc)" id="{{alternative.qta_pk}}"
                          ng-class="{'boldCorrect' : alternative.qta_is_corr_alt=='Y'}" class="editable"
                          contenteditable="true" ng-blur="getCKInstanceAlternatives(alternative.qta_pk, repoQues.qb_id)"
                          ng-model="alternative.qta_alt_desc">
                        </div>
                        <div ng-if="repoQues.qst_lang != 'ENGLISH'"
                          ng-bind-html="renderAsHtml(alternative.qta_alt_desc)" id="{{alternative.qta_pk}}"
                          ng-class="{'boldCorrect' : alternative.qta_is_corr_alt=='Y'}" class="editable"
                          contenteditable="false"
                          ng-blur="getCKInstanceAlternatives(alternative.qta_pk, repoQues.qb_id)"
                          ng-model="alternative.qta_alt_desc">
                        </div>

                        <!-- <p><img ng-if="alternative.qbank_image.qbi_image_name != null" src="static/controllers/output/{{alternative.qbank_image.qbi_image_name}}" ></p> -->

                      </div>
                    </li>
                  </ul>

                </div>




                <div class="updatedBy">updated {{repoQues.qst_audit_dt | date: "MMMM dd, y h:mm a"}}, by
                  {{repoQues.qst_audit_by}}</div>

                <div class="tabSummery">
                  <ul class="nav nav-tabs" id="myTab">
                    <li id="remarkLi{{repoQues.qb_pk}}">
                      <a data-target="#remark{{repoQues.qb_pk}}" data-toggle="tab"
                        ng-click="remarkTabClicked(repoQues.qb_pk)">Remarks</a></li>
                    <li id="referenceLi{{repoQues.qb_pk}}">
                      <a data-target="#reference{{repoQues.qb_pk}}" ng-click="referenceTabClicked(repoQues.qb_pk)"
                        data-toggle="tab">Reference</a></li>
                    <li id="calculationLi{{repoQues.qb_pk}}">
                      <a data-target="#calculation{{repoQues.qb_pk}}" ng-click="calculationTabClicked(repoQues.qb_pk)"
                        data-toggle="tab">Calculation</a></li>
                  </ul>

                </div>

                <div class="tab-content">

                  <div class="tab-pane tabSummerydetails" id="remark{{repoQues.qb_pk}}">
                    <p ng-if="repoQues.qst_lang =='ENGLISH'" class="editable" contenteditable="true"
                      id="remark{{repoQues.qb_id}}" ng-blur="getCKInstanceRemarks(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.qst_remarks)" ng-model="repoQues.qst_remarks">
                      {{repoQues.qst_remarks}}</p>
                    <p ng-if="repoQues.qst_lang!='ENGLISH'" class="editable" contenteditable="false"
                      id="remark{{repoQues.qb_id}}" ng-blur="getCKInstanceRemarks(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.qst_remarks)" ng-model="repoQues.qst_remarks">
                      {{repoQues.qst_remarks}}</p>
                  </div>

                  <div class="tab-pane tabSummerydetails" id="reference{{repoQues.qb_pk}}">
                    <p ng-if="repoQues.qst_lang=='ENGLISH'" class="editable" contenteditable="true"
                      id="ref{{repoQues.qb_id}}" ng-blur="getCKInstanceReference(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.reference_info)" ng-model="repoQues.reference_info">
                      {{repoQues.reference_info}}</p>
                    <p ng-if="repoQues.qst_lang!='ENGLISH'" class="editable" contenteditable="false"
                      id="ref{{repoQues.qb_id}}" ng-blur="getCKInstanceReference(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.reference_info)" ng-model="repoQues.reference_info">
                      {{repoQues.reference_info}}</p>
                  </div>

                  <div class="tab-pane tabSummerydetails" id="calculation{{repoQues.qb_pk}}">
                    <p ng-if="repoQues.qst_lang=='ENGLISH'" class="editable" contenteditable="true"
                      id="calculation{{repoQues.qb_id}}" ng-blur="getCKInstanceCalculation(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.calculation_info)" ng-model="repoQues.calculation_info">
                      {{repoQues.calculation_info}}</p>
                    <p ng-if="repoQues.qst_lang!='ENGLISH'" class="editable" contenteditable="false"
                      id="calculation{{repoQues.qb_id}}" ng-blur="getCKInstanceCalculation(repoQues.qb_id)"
                      ng-bind-html="renderAsHtml(repoQues.calculation_info)" ng-model="repoQues.calculation_info">
                      {{repoQues.calculation_info}}</p>
                  </div>
                </div>


              </div>

              <div class="col-md-12">
                <div class="row">
                  <div class="col-md-6">
                    <ul class="pagination">
                      <li>
                        Showing {{(countQst)>0?showOffset + 1:0}} to
                        {{(showOffset + showQstn)>countQst?countQst:(showOffset + showQstn) | number}} of {{countQst}}
                        entries
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <div class="pull-right">
                      <nav aria-label="Page navigation ">
                        <div id="pagination2">
                        </div>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>


            </div>
            <br clear="all">
          </div>
          <br clear="all">
        </div>

      </div>
      <!-- Main Body section -->
    </div>
    <div class="push"></div>
    <!-- Modal -->
    <div class="modal fade" id="historyModal" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">History</h4>
          </div>
          <div class="modal-body" ng-if="questionHistoryList.length > 0">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>
                    Exam ID
                  </th>
                  <th>
                    Exam Name
                  </th>
                  <th>
                    Year
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="data in questionHistoryList">
                  <td>{{data.qstnpaper_id}}</td>
                  <td>{{data.exam_name}}</td>
                  <td>{{data.year}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="modal-body" ng-if="questionHistoryList.length == 0">
            No record found!
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!--  <div class="row"> 
                  <div class="col-sm-3">

                   <div id="confirmationId" class="modal fade" role="dialog">
                      <div class="modal-dialog">

                
                <div class="modal-content popUpbox">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">QGet</h4> 
                  </div>
                  <div class="modal-body">
                    {{uploadResultMsg}}
                  </div>

                  <div class="modal-footer">
                    <button type="button" class="btn btnGreen" data-dismiss="modal">Ok</button>
                  </div>
                 
                </div>

                    </div>
                </div>
              </div>

            </div> -->
  <br clear="all">

  <!-- footer section -->
  <div class="footer">
    <footer>
      <div class="container ">
        <div class="fText"> &#169; Copyright 2018 NSEIT LTD All Rights Reserve </div>
      </div>
    </footer>
  </div>
  <!-- footer section -->
  <!-- cooling page end start here -->

  <!-- Include all compiled plugins (below), or include individual files as needed -->

  <!-- <script src="../../js/bootstrap.min.js"></script> -->
  <script type="text/javascript">
    $('.message a').click(function () {
      $('form').animate({
        height: "toggle",
        opacity: "toggle"
      }, "slow");
    });


    $(document).ready(function () {
      $('#tab1').click(function () {
        $('#tabDetails1').toggle();
        $('#tabDetails2').hide();
        $('#tabDetails3').hide();
      });
      $('#tab2').click(function () {
        $('#tabDetails2').toggle();
        $('#tabDetails1').hide();
        $('#tabDetails3').hide();
      });
      $('#tab3').click(function () {
        $('#tabDetails3').toggle();
        $('#tabDetails2').hide();
        $('#tabDetails1').hide();
      });

    });

  </script>


</body>

</html>